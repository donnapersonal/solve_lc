# 670.æœ€å¤§äº¤æ¢

é¢˜ç›®é“¾æ¥ï¼š[670.æœ€å¤§äº¤æ¢](https://leetcode.cn/problems/task-scheduler/)

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œä½ è‡³å¤šå¯ä»¥äº¤æ¢ä¸€æ¬¡æ•°å­—ä¸­çš„ä»»æ„ä¸¤ï¼Œè¿”å›ä½ èƒ½å¾—åˆ°çš„æœ€å¤§å€¼

```js
Example 1:
Input: num = 2736
Output: 7236
Explanation: Swap the number 2 and the number 7.

Example 2:
Input: num = 9973
Output: 9973
Explanation: No swap.
```

é™åˆ¶ï¼š
- 0 <= num <= 10^8

## è§£é¢˜

æœ€åˆæš´åŠ›æ€è·¯
- éå†æ‰€æœ‰çš„`ã€Œä¸¤ä¸¤ä½ç½®ã€(i, j)`ï¼Œå°è¯•äº¤æ¢å®ƒä»¬ï¼Œç„¶åè®¡ç®—å‡ºæ–°æ•°å­—ï¼Œæ‰¾å‡ºæœ€å¤§å€¼
- å¤æ‚åº¦åˆ†æï¼šå‡è®¾æ•°å­—é•¿åº¦ä¸º `n`ï¼Œä¸¤ä¸¤éå†æ˜¯ `O(n^2)`ï¼Œå¯¹äºæœ€å¤š `10` ä½çš„æ•´æ•°é—®é¢˜ä¹Ÿå¯ä»¥æ¥å—ï¼Œä½†ä¸å¤Ÿä¼˜é›…

è¿›ä¸€æ­¥ä¼˜åŒ–æ€è·¯
- æˆ‘ä»¬è¦åšçš„å°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªä½ç½® `i` çš„æ•°å­—ï¼ŒæŠŠå®ƒæ¢æˆåé¢æŸä¸ªä½ç½® `j` çš„æ›´å¤§çš„æ•°å­—ï¼Œä»¥ä¾¿è®©æ•°å­—å°½é‡å¤§
- æƒ³è¦æœ€å¤§å€¼ï¼Œè‡ªç„¶ä¼˜å…ˆè€ƒè™‘å·¦è¾¹é«˜ä½ï¼Œè¶Šé å‰è¶Šå½±å“æ•´ä½“æ•°å€¼

æ€è€ƒç‚¹ï¼š
- å¦‚æœä»å·¦åˆ°å³æ‰«æï¼Œæˆ‘ä»¬å¸Œæœ›ï¼šåœ¨ä½ç½® `i`ï¼Œå³è¾¹æœ‰ä¸€ä¸ªæ›´å¤§çš„æ•°å­—å¯ä»¥æ›¿æ¢å®ƒ
- ä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“å³è¾¹æœ€å¤§çš„æ•°å­—ä½ç½®ï¼Œéœ€è¦é¢„å¤„ç†

æˆ‘ä»¬å¯ä»¥åå‘éå†æ•°å­—ï¼ˆä»å³åˆ°å·¦ï¼‰ï¼ŒåŒæ—¶ç»´æŠ¤ `max_index` è¡¨ç¤ºç›®å‰æœ€å³è¾¹çš„`æœ€å¤§æ•°å­—`çš„ä½ç½®ï¼š
- å¦‚æœå½“å‰æ•°å­— `s[i]` å¤§äºå³è¾¹è®°å½•çš„æœ€å¤§å€¼ `s[max_index]`ï¼Œå°±æ›´æ–° `max_index = i`
- å¦‚æœå½“å‰æ•°å­— `s[i]` å°äºå³è¾¹æœ€å¤§å€¼ `s[max_index]`ï¼Œè¯´æ˜ï¼šğŸ‘‰ å³è¾¹å­˜åœ¨æ›´å¤§çš„æ•°å­—å¯ä»¥äº¤æ¢ï¼Œè®°å½•ä¸‹æ¥
- å¹¶ä¸”æˆ‘ä»¬å¸Œæœ›æœ€ç»ˆäº¤æ¢æ—¶ï¼Œ`s[i]` å°½é‡é å·¦ï¼ˆæ›´é«˜ä½ï¼‰ï¼Œè€Œå³è¾¹é€‰æ‹©çš„æ˜¯æœ€é å³çš„æœ€å¤§å€¼ï¼Œèƒ½è·å¾—æœ€å¤§æå‡

æœ€ç»ˆå¾—åˆ°çš„å°±æ˜¯æœ€å·¦ä¾§éœ€è¦æ¢çš„ä½ç½® `index1` å’Œå³ä¾§æœ€å¤§æ•°å­—çš„ä½ç½® `index2`ï¼Œäº¤æ¢å³å¯

```js
var maximumSwap = function(num) {
    const arr = [...'' + num];
    const n = arr.length;
    let maxIndex = n - 1;
    let index1 = -1, index2 = -1;
    for (let i = n - 1; i >= 0; i--) {
        if (arr[i] > arr[maxIndex]) {
            maxIndex = i;
        } else if (arr[i] < arr[maxIndex]) {
            index1 = i;
            index2 = maxIndex;
        }
    }
    if (index1 >= 0) {
        swap(arr, index1, index2);
        return parseInt(arr.join(''));
    } else {
        return num;
    }
};

const swap = (arr, i, j) => {
    const temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
};
```
```python
class Solution:
    def maximumSwap(self, num: int) -> int:
        # å°†æ•´æ•°è½¬æˆå­—ç¬¦æ•°ç»„ï¼Œæ–¹ä¾¿æŒ‰ä½äº¤æ¢
        # å¦‚ num = 2736 -> s = ['2','7','3','6']
        s = list(str(num))
        n = len(s)
        # max_index è¡¨ç¤ºå½“å‰â€œå³ä¾§æœ€å¤§å€¼â€çš„ä½ç½®ï¼Œåˆå§‹æ˜¯æœ€åä¸€ä½
        max_index = n - 1
        # index1 å’Œ index2 åˆ†åˆ«è®°å½•è¦äº¤æ¢çš„ä¸¤ä¸ªä½ç½®ï¼Œé»˜è®¤æ²¡æœ‰æ‰¾åˆ°
        index1 = index2 = -1
        # for i in range(n-2, -1, -1) ä¹Ÿè¡Œ
        # ä»å³å‘å·¦éå†æ‰€æœ‰ä½ç½®
        for i in range(n-1, -1, -1):
            if s[i] > s[max_index]:
                # å¦‚æœå½“å‰æ•°å­—æ¯”å½“å‰è®°å½•çš„æœ€å¤§æ•°å­—è¿˜å¤§
                # é‚£ä¹ˆæ›´æ–° max_indexï¼Œå› ä¸ºä»è¿™ä¸€ä½å¼€å§‹ï¼Œå³ä¾§æœ€å¤§å€¼å°±å˜äº†
                max_index = i
            elif s[i] < s[max_index]:
                # å¦‚æœå½“å‰æ•°å­—æ¯”å³ä¾§æœ€å¤§å€¼è¿˜å°
                # è¯´æ˜å¯ä»¥é€šè¿‡äº¤æ¢ s[i] å’Œå³ä¾§æ›´å¤§çš„é‚£ä¸ªæ•°ï¼Œå¾—åˆ°æ›´å¤§çš„ç»“æœ
                # è®°å½•ä¸‹æ¥ï¼ˆä¸æ–­æ›´æ–°ï¼Œæœ€åä¼šå¾—åˆ°æœ€å·¦è¾¹èƒ½æ¢çš„ä½ç½®å’Œæœ€å³è¾¹æœ€å¤§å€¼ï¼‰
                index1, index2 = i, max_index
        
        # å¦‚æœ index1 ä¾ç„¶æ˜¯ -1ï¼Œè¯´æ˜æ•´ä¸ªæ•°å­—å·²ç»æ˜¯é™åºæ’åˆ—ï¼Œæ— éœ€äº¤æ¢
        if index1 < 0:
            return num
        
        # äº¤æ¢ä¸¤ä¸ªä½ç½®çš„æ•°å­—
        s[index1], s[index2] = s[index2], s[index1]
        
        # æ‹¼æ¥æˆæ•´æ•°å¹¶è¿”å›
        return int(''.join(s))
```

- æ—¶é—´å¤æ‚åº¦ï¼š`O(lognum)`ï¼Œå…¶ä¸­æ•´æ•° `num` ä¸ºç»™å®šçš„æ•°å­—
  - `num` è½¬æ¢ä¸ºåè¿›åˆ¶æ•°ï¼Œæœ‰ `O(lognum)` ä¸ªæ•°å­—ï¼Œéœ€éå†ä¸€æ¬¡æ‰€æœ‰çš„æ•°å­—å³å¯
- ç©ºé—´å¤æ‚åº¦ï¼š`O(lognum)`ï¼Œå…¶ä¸­æ•´æ•° `num` ä¸ºç»™å®šçš„æ•°å­—
  - `num` è½¬æ¢ä¸ºåè¿›åˆ¶æ•°ï¼Œæœ‰ `O(lognum)` ä¸ªæ•°å­—ï¼Œéœ€è¦ä¿å­˜ `num` æ‰€æœ‰çš„æ•°å­—
  
> æ³¨æ„ï¼šå¯ä»¥å†™æˆ `O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ•°å­— `num` çš„åè¿›åˆ¶ä½æ•°ï¼Œä½†å¦‚æœä» `num` çš„æ•°å€¼å¤§å°æ¥æè¿°ï¼š
> - ä¸€ä¸ªæ•´æ•° `num` çš„ **åè¿›åˆ¶ä½æ•°** å¤§çº¦æ˜¯ `log10(num)`ï¼ˆå¦‚ `num = 2736` æœ‰ `4` ä½ï¼Œ`log10(2736) â‰ˆ 3.4`ï¼Œå–æ•´å `+1 â‰ˆ 4`ï¼‰
> - æ‰€ä»¥ `O(n)` ä¹Ÿå¯ä»¥å†™ä½œ `O(log10(num))`ï¼Œå³ `O(logâ€¯num)`