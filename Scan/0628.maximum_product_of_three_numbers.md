# 628.三个数的最大乘积

题目链接：[628.三个数的最大乘积](https://leetcode.cn/problems/maximum-product-of-three-numbers/)

## 题目大意

给你一个整型数组 `nums`，在数组中找出由三个数组成的最大乘积，并输出这个乘积

```js
Example 1:
Input: nums = [1,2,3]
Output: 6

Example 2:
Input: nums = [1,2,3,4]
Output: 24

Example 3:
Input: nums = [-1,-2,-3]
Output: -6
```

限制：
- 3 <= nums.length <= 10^4
- -1000 <= nums[i] <= 1000

## 解题

想要乘积最大，三个数的组合可能有两种情况：
- 全是最大值的正数
  - 取数组中最大的三个数：`max1 * max2 * max3`
- 两个最小值（负数）和一个最大值
  - 负负得正，有时乘积更大：`max1 * min1 * min2`
- 除此之外没有别的可能性，因为三个数的乘积受最大正数和最小负数影响最大

优化思路
- 我们只需在一次遍历中，找到：
  - 最大三个数：`max1 >= max2 >= max3`
  - 最小两个数：`min1 <= min2`
- 然后计算 `max(max1 * max2 * max3, max1 * min1 * min2)`
- 这样就能用 `O(n)` 时间和 `O(1)` 额外空间解决问题

```js
var maximumProduct = function(nums) {
    let max1 = -Infinity, max2 = -Infinity, max3 = -Infinity;
    let min1 = Infinity, min2 = Infinity;

    for (let num of nums) {
        // 最大三个数
        if (num > max1) {
            [max1, max2, max3] = [num, max1, max2];
        } else if (num > max2) {
            [max2, max3] = [num, max2];
        } else if (num > max3) {
            max3 = num;
        }

        // 最小两个数
        if (num < min1) {
            [min1, min2] = [num, min1];
        } else if (num < min2) {
            min2 = num;
        }
    }

    return Math.max(max1 * max2 * max3, max1 * min1 * min2);
};
```
```python
class Solution:
    def maximumProduct(self, nums: List[int]) -> int:
        # max1、max2、max3：用来存储最大的三个数，初始为负无穷
        max1 = max2 = max3 = float('-inf')
        # min1、min2：用来存储最小的两个数，初始为正无穷
        min1 = min2 = float('inf')
        # 遍历数组中的每一个数 num
        for num in nums:
            # 更新最大三个数
            # 如果 num 大于当前最大值 max1：更新顺序：max1 → max2 → max3，把 num 插到第一位
            if num > max1:
                max1, max2, max3 = num, max1, max2
            # 否则，如果 num 大于 max2：更新顺序：max2 → max3
            elif num > max2:
                max2, max3 = num, max2
            # 否则，如果 num 大于 max3：更新 max3
            elif num > max3:
                max3 = num
            
            # 更新最小两个数
            # 如果 num 小于当前最小值 min1：更新顺序：min1 → min2
            if num < min1:
                min1, min2 = num, min1
            # 否则，如果 num 小于 min2：更新 min2
            elif num < min2:
                min2 = num
        
        # 两种情况取最大值：
        # - 最大三个数的乘积：max1 * max2 * max3
        # - 最大数与最小两个数的乘积：max1 * min1 * min2
        # 返回二者中较大者
        return max(max1 * max2 * max3, max1 * min1 * min2)
```

- 时间复杂度：`O(n)`，其中 `n` 为数组长度，仅需遍历数组一次
- 空间复杂度：`O(1)`