# 414.第三大的数

题目链接：[414.第三大的数](https://leetcode.cn/problems/third-maximum-number/)

## 题目大意

给你一个非空数组，返回此数组中第三大的数 。如果不存在，则返回数组中最大的数

```js
Example 1:
Input: nums = [3,2,1]
Output: 1
Explanation:
The first distinct maximum is 3.
The second distinct maximum is 2.
The third distinct maximum is 1.

Example 2:
Input: nums = [1,2]
Output: 2
Explanation:
The first distinct maximum is 2.
The second distinct maximum is 1.
The third distinct maximum does not exist, so the maximum (2) is returned instead.

Example 3:
Input: nums = [2,2,3,1]
Output: 1
Explanation:
The first distinct maximum is 3.
The second distinct maximum is 2 (both 2's are counted together since they have the same value).
The third distinct maximum is 1.
```

限制：
- 1 <= nums.length <= 10^4
- -2^31 <= nums[i] <= 2^31 - 1

## 解题

最初暴力思路
- 先对数组去重，得到所有不同数字
- 对去重后的数组排序（如用内置 `sort()`）
- 如果不同数字个数 `≥ 3`，就返回倒数第三个，否则返回最大值
- 问题：排序的时间复杂度是 `O(n log n)`，虽然可以接受，但其实不需要整个排序，只想要前三大的不同数字

我们只关心前三大的不同数字，用三个变量维护即可：
- 遍历 `nums`：
  - 跳过重复的值（不要把同一个值计入多个位置）
  - 动态更新 `first`（最大）、`second`（第二大）、`third`（第三大）

更新规则：
- 如果当前数字比 `first` 大：整体往后挪，更新 `first`
- 否则，如果比 `second` 大：整体往后挪，更新 `second`
- 否则，如果比 `third` 大：更新 `third`

最后：
- 如果 `third` 存在，返回 `third`
- 否则，返回 `first`

> 解法：一次遍历 + 三个变量追踪（不排序）

```js
var thirdMax = function(nums) {
    let first = null, second = null, third = null;

    for (let num of nums) {
        if (num === first || num === second || num === third) continue;

        if (first === null || num > first) {
            third = second;
            second = first;
            first = num;
        } else if (second === null || num > second) {
            third = second;
            second = num;
        } else if (third === null || num > third) {
            third = num;
        }
    }

    return third !== null ? third : first;
};
```
```python
class Solution:
    def thirdMax(self, nums: List[int]) -> int:
        # 初始化三个变量：
        # - first：当前最大的数字
        # - second：当前第二大的数字
        # - third：当前第三大的数字
        # 初始都设为 None，表示还没有找到。
        first = second = third = None
        # 遍历数组 nums 中的每一个数字 num
        for num in nums:
            # 如果 num 已经是 first、second、third 中的某一个，说明已经记录过这个值，跳过，避免重复
            if num == first or num == second or num == third:
                continue
            
            # 如果 first 还没赋值，或者当前 num 比当前最大值 first 还大：
            # - 把 second 移动到 third
            # - 把 first 移动到 second
            # 更新 first = num
            if first is None or num > first:
                third = second
                second = first
                first = num
            elif second is None or num > second:
                # 如果没进入上面的条件，但 second 没有赋值，或者 num 比 second 大：
                # - 把 second 移到 third
                # - 更新 second = num
                third = second
                second = num
            elif third is None or num > third:
                # 如果没进入前两个条件，但 third 没有赋值，或者 num 比 third 大：更新 third = num
                third = num
            
        # 遍历完成后，如果 third 不为 None，返回 third（第三大值）
        # 否则返回 first（如果不同数字不足三个，返回最大值）
        return third if third is not None else first
```

- 时间复杂度：`O(n)`，其中 `n` 是数组 `nums` 的长度
- 空间复杂度：`O(1)`