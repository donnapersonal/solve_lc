# 2101.å¼•çˆ†æœ€å¤šçš„ç‚¸å¼¹

é¢˜ç›®é“¾æ¥ï¼š[2101.å¼•çˆ†æœ€å¤šçš„ç‚¸å¼¹](https://leetcode.cn/problems/detonate-the-maximum-bombs/)

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªç‚¸å¼¹åˆ—è¡¨ï¼Œä¸€ä¸ªç‚¸å¼¹çš„ çˆ†ç‚¸èŒƒå›´ å®šä¹‰ä¸ºä»¥ç‚¸å¼¹ä¸ºåœ†å¿ƒçš„ä¸€ä¸ªåœ†

ç‚¸å¼¹ç”¨ä¸€ä¸ªä¸‹æ ‡ä» `0` å¼€å§‹çš„äºŒç»´æ•´æ•°æ•°ç»„ `bombs` è¡¨ç¤ºï¼Œå…¶ä¸­ `bombs[i] = [xi, yi, ri]`ã€‚`xi` å’Œ `yi` è¡¨ç¤ºç¬¬ `i` ä¸ªç‚¸å¼¹çš„ `X` å’Œ `Y` åæ ‡ï¼Œ`ri` è¡¨ç¤ºçˆ†ç‚¸èŒƒå›´çš„ åŠå¾„ 

éœ€è¦é€‰æ‹©å¼•çˆ† ä¸€ä¸ª ç‚¸å¼¹ï¼Œå½“è¿™ä¸ªç‚¸å¼¹è¢«å¼•çˆ†æ—¶ï¼Œæ‰€æœ‰åœ¨å®ƒçˆ†ç‚¸èŒƒå›´å†…çš„ç‚¸å¼¹éƒ½ä¼šè¢«å¼•çˆ†ï¼Œè¿™äº›ç‚¸å¼¹ä¼šè¿›ä¸€æ­¥å°†å®ƒä»¬çˆ†ç‚¸èŒƒå›´å†…çš„å…¶ä»–ç‚¸å¼¹å¼•çˆ†

ç»™æ•°ç»„ `bombs`ï¼Œè¯·è¿”å›åœ¨å¼•çˆ† ä¸€ä¸ª ç‚¸å¼¹çš„å‰æä¸‹ï¼Œæœ€å¤š èƒ½å¼•çˆ†çš„ç‚¸å¼¹æ•°ç›®

![example1](https://github.com/donnapersonal/picx-images-hosting/raw/master/image.3yetjlsczp.webp)

![example2](https://github.com/donnapersonal/picx-images-hosting/raw/master/image.8s3ofqdtcc.webp)

![example3](https://github.com/donnapersonal/picx-images-hosting/raw/master/image.5fkylcxu2w.webp)

é™åˆ¶ï¼š
- 1 <= bombs.length <= 100
- bombs[i].length == 3
- 1 <= xi, yi, ri <= 10^5

## è§£é¢˜

æœ¬é¢˜æœ¬è´¨æ˜¯æœ‰å‘å›¾éå†é—®é¢˜ï¼Œä»æ¯ä¸ªèŠ‚ç‚¹å‡ºå‘åš `DFS` å³å¯ï¼Œå…³é”®åœ¨äºï¼š
- å¦‚ä½•å»ºå›¾ï¼ˆè®¡ç®—ä¸¤ç‚¸å¼¹é—´è·ç¦»ï¼‰
- å¦‚ä½•è¿›è¡Œæœç´¢ï¼ˆ`DFS + visited`ï¼‰

æ­¥éª¤å¦‚ä¸‹ï¼š
- å›¾å»ºæ¨¡ï¼šæŠŠæ¯ä¸ªç‚¸å¼¹çœ‹ä½œå›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè‹¥ç‚¸å¼¹ `i` å¯ä»¥å¼•çˆ†ç‚¸å¼¹ `j`ï¼Œå°±å»ºç«‹ä¸€æ¡ä» `i â†’ j` çš„æœ‰å‘è¾¹
- åˆ¤æ–­çˆ†ç‚¸èŒƒå›´ï¼š
  - å¯¹äºä¸¤ä¸ªç‚¸å¼¹ `i` å’Œ `j`ï¼Œè‹¥ï¼š`(ğ‘¥ğ‘– âˆ’ ğ‘¥ğ‘—)^2 + (ğ‘¦ğ‘– âˆ’ ğ‘¦ğ‘—)^2 â‰¤ ğ‘Ÿğ‘–^2`ï¼Œåˆ™è¯´æ˜ `i` èƒ½å¼•çˆ† `j`
- `DFS` éå†å›¾ï¼šä»æ¯ä¸ªç‚¸å¼¹å‡ºå‘ï¼Œä½¿ç”¨ `DFS` ç»Ÿè®¡æ‰€æœ‰è¿é”çˆ†ç‚¸èƒ½å¼•çˆ†çš„æ•°é‡
- å–æœ€å¤§å€¼ï¼šæ‰€æœ‰ç‚¸å¼¹éƒ½ä½œä¸ºèµ·ç‚¹å°è¯•ä¸€æ¬¡ï¼Œå–å…¶ä¸­æœ€å¤§å¼•çˆ†æ•°

```js
var maximumDetonation = function(bombs) {
    const n = bombs.length;
    const graph = Array.from({ length: n }, () => []);

    // æ„å»ºå›¾ï¼šä» i èƒ½å¼•çˆ† jï¼Œå°±è¿è¾¹ i -> j
    for (let i = 0; i < n; i++) {
        const [x1, y1, r1] = bombs[i];
        for (let j = 0; j < n; j++) {
            if (i === j) continue;
            const [x2, y2] = bombs[j];
            const dx = x1 - x2;
            const dy = y1 - y2;
            if (dx * dx + dy * dy <= r1 * r1) {
                graph[i].push(j);
            }
        }
    }

    // DFS è®¡ç®—ä» x èƒ½å¼•çˆ†å¤šå°‘ä¸ªç‚¸å¼¹
    const dfs = (x, visited) => {
        visited[x] = true;
        let count = 1;
        for (const y of graph[x]) {
            if (!visited[y]) {
                count += dfs(y, visited);
            }
        }
        return count;
    };

    let res = 0;
    for (let i = 0; i < n; i++) {
        const visited = new Array(n).fill(false);
        res = Math.max(res, dfs(i, visited));
        if (res === n) break;  // å·²ç»å¼•çˆ†å…¨éƒ¨ç‚¸å¼¹ï¼Œæå‰ç»“æŸ
    }

    return res;
};
```
```python
class Solution:
    def maximumDetonation(self, bombs: List[List[int]]) -> int:
        # è·å–ç‚¸å¼¹æ€»æ•° n
        n = len(bombs)
        # åˆå§‹åŒ–é‚»æ¥è¡¨ï¼šgraph[i] è¡¨ç¤ºä»ç‚¸å¼¹ i èƒ½å¼•çˆ†å“ªäº›ç‚¸å¼¹ï¼ˆé‚»å±…ï¼‰
        graph = [[] for _ in range(n)]

        # æ„å»ºæœ‰å‘å›¾ï¼Œåˆ¤æ–­ç¬¬ i é¢—ç‚¸å¼¹èƒ½å¦å¼•çˆ†ç¬¬ j é¢—ç‚¸å¼¹
        for i, (x, y, r) in enumerate(bombs):
            for j, (x2, y2, _) in enumerate(bombs):
                # è®¡ç®—ä¸¤ç‚¹é—´æ¬§å‡ é‡Œå¾—è·ç¦»çš„å¹³æ–¹æ˜¯å¦å°äºç­‰äº rÂ²
                dx = x - x2
                dy = y - y2
                if j != i and dx * dx + dy * dy <= r * r:
                    # æ»¡è¶³æ¡ä»¶åˆ™åœ¨ graph[i] ä¸­åŠ å…¥ jï¼ˆå»ºç«‹ i â†’ j çš„è¾¹ï¼‰
                    graph[i].append(j) 
        
        # å®šä¹‰ DFS å‡½æ•°ï¼Œä»ç‚¸å¼¹ x å¼€å§‹çˆ†ç‚¸ï¼Œç»Ÿè®¡å¼•çˆ†æ•°é‡
        def dfs(x: int) -> int:
            visited[x] = True
            # åˆå§‹å·²å¼•çˆ†å½“å‰ç‚¸å¼¹ xï¼Œæ‰€ä»¥ count = 1
            count = 1

            # éå†æ‰€æœ‰å¯è¢« x å¼•çˆ†çš„ç‚¸å¼¹ y
            for y in graph[x]:
                # å¦‚æœ y æ²¡è¢«è®¿é—®è¿‡ï¼Œé€’å½’çˆ†ç‚¸å®ƒ
                if not visited[y]:
                    # ç´¯åŠ æ‰€æœ‰è¿é”çˆ†ç‚¸çš„æ•°é‡
                    count += dfs(y)

            return count

        res = 0
        # éå†æ‰€æœ‰ç‚¸å¼¹ï¼Œä½œä¸ºèµ·å§‹çˆ†ç‚¸ç‚¹
        for i in range(n):
            # æ¯æ¬¡éƒ½æ–°å»º visited æ•°ç»„ï¼Œé¿å…æ±¡æŸ“
            visited = [False] * n
            # ä½¿ç”¨ DFS æ¨¡æ‹Ÿä»è¯¥ç‚¸å¼¹å¼€å§‹çš„è¿é”çˆ†ç‚¸
            # æ¯æ¬¡æ›´æ–°æœ€å¤§å€¼ res
            res = max(res, dfs(i))
            # è‹¥æŸæ¬¡å·²ç»å¼•çˆ†å…¨éƒ¨ç‚¸å¼¹ï¼Œç›´æ¥æå‰ break
            if res == n:
                break
                
        return res
```

- æ—¶é—´å¤æ‚åº¦ï¼š`O(n^3)`ï¼Œå…¶ä¸­ `n` æ˜¯ `bombs` çš„é•¿åº¦ï¼Œæ³¨æ„å›¾ä¸­è‡³å¤šæœ‰ `O(n^2)` æ¡è¾¹ï¼Œæ¯æ¬¡ `DFS` çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(n^2)`
- ç©ºé—´å¤æ‚åº¦ï¼š`O(n^2)`

